<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Lua Filter Template</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Lua Filter Template</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#checklist">Checklist</a></li>
<li><a href="#license">License</a></li>
<li><a href="#Example">Example</a>
<ul>
<li>input.md</li>
<li>output.md</li>
</ul></li>
<li><a href="#Code">Code</a></li>
</ul>
</nav>
<p><a href="https://github.com/tarleb/lua-filter-template/actions/workflows/ci.yaml"><img src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTA1IiBoZWlnaHQ9IjIwIiByb2xlPSJpbWciIGFyaWEtbGFiZWw9ImJ1aWxkOiBwYXNzaW5nIj48dGl0bGU+YnVpbGQ6IHBhc3Npbmc8L3RpdGxlPjxsaW5lYXJHcmFkaWVudCBpZD0icyIgeDI9IjAiIHkyPSIxMDAlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNiYmIiIHN0b3Atb3BhY2l0eT0iLjEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3Atb3BhY2l0eT0iLjEiLz48L2xpbmVhckdyYWRpZW50PjxjbGlwUGF0aCBpZD0iciI+PHJlY3Qgd2lkdGg9IjEwNSIgaGVpZ2h0PSIyMCIgcng9IjMiIGZpbGw9IiNmZmYiLz48L2NsaXBQYXRoPjxnIGNsaXAtcGF0aD0idXJsKCNyKSI+PHJlY3Qgd2lkdGg9IjU0IiBoZWlnaHQ9IjIwIiBmaWxsPSIjNTU1Ii8+PHJlY3QgeD0iNTQiIHdpZHRoPSI1MSIgaGVpZ2h0PSIyMCIgZmlsbD0iIzRjMSIvPjxyZWN0IHdpZHRoPSIxMDUiIGhlaWdodD0iMjAiIGZpbGw9InVybCgjcykiLz48L2c+PGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IlZlcmRhbmEsR2VuZXZhLERlamFWdSBTYW5zLHNhbnMtc2VyaWYiIHRleHQtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIGZvbnQtc2l6ZT0iMTEwIj48aW1hZ2UgeD0iNSIgeT0iMyIgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB4bGluazpocmVmPSJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUJtYVd4c1BTSjNhR2wwWlhOdGIydGxJaUJ5YjJ4bFBTSnBiV2NpSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0OGRHbDBiR1UrUjJsMFNIVmlQQzkwYVhSc1pUNDhjR0YwYUNCa1BTSk5NVElnTGpJNU4yTXROaTQyTXlBd0xURXlJRFV1TXpjekxURXlJREV5SURBZ05TNHpNRE1nTXk0ME16Z2dPUzQ0SURndU1qQTFJREV4TGpNNE5TNDJMakV4TXk0NE1pMHVNalU0TGpneUxTNDFOemNnTUMwdU1qZzFMUzR3TVMweExqQTBMUzR3TVRVdE1pNHdOQzB6TGpNek9DNDNNalF0TkM0d05ESXRNUzQyTVMwMExqQTBNaTB4TGpZeFF6UXVOREl5SURFNExqQTNJRE11TmpNeklERTNMamNnTXk0Mk16TWdNVGN1TjJNdE1TNHdPRGN0TGpjME5DNHdPRFF0TGpjeU9TNHdPRFF0TGpjeU9TQXhMakl3TlM0d09EUWdNUzQ0TXpnZ01TNHlNellnTVM0NE16Z2dNUzR5TXpZZ01TNHdOeUF4TGpnek5TQXlMamd3T1NBeExqTXdOU0F6TGpRNU5TNDVPVGd1TVRBNExTNDNOell1TkRFM0xURXVNekExTGpjMkxURXVOakExTFRJdU5qWTFMUzR6TFRVdU5EWTJMVEV1TXpNeUxUVXVORFkyTFRVdU9UTWdNQzB4TGpNeExqUTJOUzB5TGpNNElERXVNak0xTFRNdU1qSXRMakV6TlMwdU16QXpMUzQxTkMweExqVXlNeTR4TURVdE15NHhOellnTUNBd0lERXVNREExTFM0ek1qSWdNeTR6SURFdU1qTXVPVFl0TGpJMk55QXhMams0TFM0ek9Ua2dNeTB1TkRBMUlERXVNREl1TURBMklESXVNRFF1TVRNNElETWdMalF3TlNBeUxqSTRMVEV1TlRVeUlETXVNamcxTFRFdU1qTWdNeTR5T0RVdE1TNHlNeTQyTkRVZ01TNDJOVE11TWpRZ01pNDROek11TVRJZ015NHhOell1TnpZMUxqZzBJREV1TWpNZ01TNDVNU0F4TGpJeklETXVNaklnTUNBMExqWXhMVEl1T0RBMUlEVXVOakkxTFRVdU5EYzFJRFV1T1RJdU5ESXVNell1T0RFZ01TNHdPVFl1T0RFZ01pNHlNaUF3SURFdU5qQTJMUzR3TVRVZ01pNDRPVFl0TGpBeE5TQXpMakk0TmlBd0lDNHpNVFV1TWpFdU5qa3VPREkxTGpVM1F6SXdMalUyTlNBeU1pNHdPVElnTWpRZ01UY3VOVGt5SURJMElERXlMakk1TjJNd0xUWXVOakkzTFRVdU16Y3pMVEV5TFRFeUxURXlJaTgrUEM5emRtYysiLz48dGV4dCBhcmlhLWhpZGRlbj0idHJ1ZSIgeD0iMzY1IiB5PSIxNTAiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSIyNzAiPmJ1aWxkPC90ZXh0Pjx0ZXh0IHg9IjM2NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgZmlsbD0iI2ZmZiIgdGV4dExlbmd0aD0iMjcwIj5idWlsZDwvdGV4dD48dGV4dCBhcmlhLWhpZGRlbj0idHJ1ZSIgeD0iNzg1IiB5PSIxNTAiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSI0MTAiPnBhc3Npbmc8L3RleHQ+PHRleHQgeD0iNzg1IiB5PSIxNDAiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiBmaWxsPSIjZmZmIiB0ZXh0TGVuZ3RoPSI0MTAiPnBhc3Npbmc8L3RleHQ+PC9nPjwvc3ZnPg==" alt="GitHub build status" /></a></p>
<p>This repository serves as a template intended to make publishing of
pandoc <a href="https://pandoc.org/lua-filters.html">Lua filters</a>
easy and convenient. Just click “Use this template” and then make
modifications in your new repository. See also the GitHub documentation
on <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template">creating
a repository from a template</a>.</p>
<h2 id="checklist">Checklist</h2>
<p>This is just a template, so a few things should be changed to make
good use of this template. You can use the checklist below to ensure
that you get the most out of it. We recommend that you perform at least
the first two steps, everything else is up to you.</p>
<ol type="1">
<li><p><input type="checkbox" disabled></input>
<strong>Rename the filter</strong>: rename the filter
<code>greetings.lua</code> to your chosen name. It’s often a good idea
to make the filter name match the repository name: if your repository is
named <code>lorem</code>, then the filter should be named
<code>lorem.lua</code>.</p></li>
<li><p><input type="checkbox" disabled></input>
<strong>Choose a license</strong>: The template is published as CC0,
which is most likely not what you want. We recommend the MIT
license.</p></li>
<li><p><input type="checkbox" disabled></input>
<strong>Update this README</strong>: describe your filter, so people
will know what to expect. You may also want to update the URLs above to
match your repository.</p></li>
</ol>
<h2 id="license">License</h2>
<p>This template repository is published under the Creative Commons CC0
License, see the file <code>LICENSE</code>. Users of the template may
choose to use a different license, in which case the file should be
updated.</p>
<h2 id="Example">Example</h2>
<h3>input.md</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown sample"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Lorem ipsum</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Nullus</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>hendrerit tempor tellus. Donec pretium posuere tellus. Proin quam</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>nisl, tincidunt et, mattis eget, convallis nec, purus.</span></code></pre></div>
<h3>output.md</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown sample"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Nullus</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> Lorem ipsum</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Greetings!</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>Hello from the Lua filter!</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>hendrerit tempor tellus. Donec pretium posuere tellus. Proin quam nisl,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>tincidunt et, mattis eget, convallis nec, purus.</span></code></pre></div>
<h2 id="Code">Code</h2>
<p><a href="greetings.lua">greetings.lua</a></p>
<div class="sourceCode" id="greetings.lua"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="greetings.lua-1"><a href="#greetings.lua-1" aria-hidden="true" tabindex="-1"></a><span class="co">--- greetings.lua – turns any document into a friendly greeting</span></span>
<span id="greetings.lua-2"><a href="#greetings.lua-2" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="greetings.lua-3"><a href="#greetings.lua-3" aria-hidden="true" tabindex="-1"></a><span class="co">--- Copyright: © 2021–2022 Contributors</span></span>
<span id="greetings.lua-4"><a href="#greetings.lua-4" aria-hidden="true" tabindex="-1"></a><span class="co">--- License: MIT – see LICENSE for details</span></span>
<span id="greetings.lua-5"><a href="#greetings.lua-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="greetings.lua-6"><a href="#greetings.lua-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Makes sure users know if their pandoc version is too old for this</span></span>
<span id="greetings.lua-7"><a href="#greetings.lua-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- filter.</span></span>
<span id="greetings.lua-8"><a href="#greetings.lua-8" aria-hidden="true" tabindex="-1"></a><span class="cn">PANDOC_VERSION</span><span class="op">:</span>must_be_at_least <span class="st">&#39;2.17&#39;</span></span>
<span id="greetings.lua-9"><a href="#greetings.lua-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="greetings.lua-10"><a href="#greetings.lua-10" aria-hidden="true" tabindex="-1"></a><span class="co">--- Amends the contents of a document with a simple greeting.</span></span>
<span id="greetings.lua-11"><a href="#greetings.lua-11" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> function say_hello <span class="op">(</span>doc<span class="op">)</span></span>
<span id="greetings.lua-12"><a href="#greetings.lua-12" aria-hidden="true" tabindex="-1"></a>  doc<span class="op">.</span>meta<span class="op">.</span>subtitle <span class="op">=</span> doc<span class="op">.</span>meta<span class="op">.</span>title            <span class="co">-- demote title to subtitle</span></span>
<span id="greetings.lua-13"><a href="#greetings.lua-13" aria-hidden="true" tabindex="-1"></a>  doc<span class="op">.</span>meta<span class="op">.</span>title <span class="op">=</span> pandoc<span class="op">.</span>Inlines <span class="st">&#39;Greetings!&#39;</span>  <span class="co">-- set new title</span></span>
<span id="greetings.lua-14"><a href="#greetings.lua-14" aria-hidden="true" tabindex="-1"></a>  doc<span class="op">.</span>blocks<span class="op">:</span><span class="fu">insert</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> pandoc<span class="op">.</span>Para <span class="st">&#39;Hello from the Lua filter!&#39;</span><span class="op">)</span></span>
<span id="greetings.lua-15"><a href="#greetings.lua-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> doc</span>
<span id="greetings.lua-16"><a href="#greetings.lua-16" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="greetings.lua-17"><a href="#greetings.lua-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="greetings.lua-18"><a href="#greetings.lua-18" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> <span class="op">{</span></span>
<span id="greetings.lua-19"><a href="#greetings.lua-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Apply the `say_hello` function to the main Pandoc document.</span></span>
<span id="greetings.lua-20"><a href="#greetings.lua-20" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span> <span class="cn">P</span>andoc <span class="op">=</span> say_hello <span class="op">}</span></span>
<span id="greetings.lua-21"><a href="#greetings.lua-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</body>
</html>
